# M2.2 自动保存 · 撤销/重做 · 乐观更新 · 节点进度记录

## 一、计划
- 目标：实现失焦立即保存、4s 去抖批量（≤200 单元格/批）、历史栈 100 步、乐观更新与失败/冲突回滚提示。
- 任务清单：
  - [ ] 失焦自动保存
  - [ ] 4s 去抖批量保存（合并脏写）
  - [ ] 历史栈与撤销/重做（Ctrl/Cmd+Z / Ctrl/Cmd+Y）
  - [ ] 乐观更新与回滚
  - [ ] E2E 关键路径用例
- 依赖：`saveDirty()` 并发/冲突逻辑
- 验收标准：操作流畅，失败可回滚，冲突可重试；E2E 用例通过
- 计划起止：2025-10-28 ~ 2025-10-31
- 责任/审核：Owner FE / Reviewer PM

## 二、实际进度
- 状态：Green
- 完成度：0%
- 实际起止：
- PR/提交：
- 预览链接：http://localhost:5173/
- 用时：0
- 风险与阻塞：
- 纠偏动作：

## 三、完成总结与计划调整（完成当天必填）
- 验收结果：
- 与原计划差异：
- 对后续排期的影响与调整（必须）：
- 经验复盘：

---

## 元数据（YAML）
```yaml
id: M2.2
name: 自动保存-撤销重做-乐观更新
version: v0.0.4
plan_range: 2025-10-28 ~ 2025-10-31
actual_range: 
status: Green
progress: 0%
owner: FE
reviewer: PM
prs: []
preview: "http://localhost:5173/"
hours: 0
risks: []
actions: []
acceptance:
  - 失焦立即保存
  - 4s 去抖批量（≤200 单元格/批）
  - 历史栈 100 步 + 撤销/重做
  - 乐观更新 + 回滚提示
dependencies:
  - saveDirty()
post_completion:
  plan_adjustments: ""
  retrospective: ""
```